DROP TABLE APP.COMPANY_COUPON;
DROP TABLE APP.CUSTOMER_COUPON;

DROP TABLE APP.COMPANY;
DROP TABLE APP.CUSTOMER;
DROP TABLE APP.COUPON;

CREATE TABLE APP.COMPANY(
	ID INT GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	COMP_NAME VARCHAR(40) UNIQUE,
	PASSWORD VARCHAR(10),
	EMAIL VARCHAR(100),
	PRIMARY KEY(ID)
);



CREATE TABLE APP.CUSTOMER(
	ID INT GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	CUST_NAME VARCHAR(40) UNIQUE,
	PASSWORD VARCHAR(10),
	PRIMARY KEY(ID)
);


CREATE TABLE APP.COUPON(
	ID INT GENERATED ALWAYS AS IDENTITY (START WITH 1, INCREMENT BY 1),
	TITLE VARCHAR(100) UNIQUE,
	START_DATE DATE,
	END_DATE DATE,
	AMOUNT INT,
	C_TYPE VARCHAR(20),
	MESSAGE VARCHAR(200),
	PRICE DOUBLE,
	IMAGE VARCHAR(150),
	PRIMARY KEY(ID)
);


CREATE TABLE APP.CUSTOMER_COUPON(
	CUST_ID INT,
	COUPON_ID INT,
	PRIMARY KEY(CUST_ID,COUPON_ID),
	FOREIGN KEY(CUST_ID) REFERENCES APP.CUSTOMER(ID),
	FOREIGN KEY(COUPON_ID) REFERENCES APP.COUPON(ID)
);



CREATE TABLE APP.COMPANY_COUPON(
	COMP_ID INT,
	COUPON_ID INT,
	PRIMARY KEY(COMP_ID,COUPON_ID),
	FOREIGN KEY(COMP_ID) REFERENCES APP.COMPANY(ID),
	FOREIGN KEY(COUPON_ID) REFERENCES APP.COUPON(ID)
);